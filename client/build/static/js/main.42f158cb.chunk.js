(this.webpackJsonptodolist_app=this.webpackJsonptodolist_app||[]).push([[0],{125:function(e,t,a){e.exports=a(238)},227:function(e,t,a){},228:function(e,t,a){},231:function(e,t,a){e.exports=a.p+"static/media/logo.183dc3a6.svg"},232:function(e,t,a){},233:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var n=a(80),r=a.n(n),o=a(109),c=a(0),l=a.n(c),i=a(19),s=a.n(i),u=a(35),m=a(11),d=a(18),p=a(111),f=a(249),h=a(86),g=a(74),b=[{id:-1,text:"drink water",timeCreated:1584135899914,isCompleted:!1,groupId:-1},{id:-2,text:"wash hands",timeCreated:1584135992855,isCompleted:!0,groupId:-2}],E=Object(u.c)({todoList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_todoItem":return[].concat(Object(g.a)(e),[t.payload]);case"toggle_todoItem":var a=e.map((function(e){return e.id===t.payload?Object(h.a)(Object(h.a)({},e),{},{isCompleted:!e.isCompleted}):e}));return a;default:return e}},visibility:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"switch_visibility":return console.log("clicked toggle: "+t.payload),t.payload;default:return e}},groupSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"select_group":return t.payload;default:return e}},groupList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{groupName:"Default Group",groupId:-1},{groupName:"Group 2",groupId:-2}],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add_group":return console.log("here is being executed"),[].concat(Object(g.a)(e),[t.payload]);default:return e}},form:f.a,authed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"fetch_user":case"auth_user":return t.payload||!1;default:return e}}}),v=a(14),y=a.n(v);function j(){return function(e){y.a.get("/api/current_user").then((function(t){console.log(t),e({type:"fetch_user",payload:t.data.username})})).catch((function(e){return console.error(e)}))}}function O(e){return{type:"auth_user",payload:e}}var N=a(39),C=a(40),w=a(45),k=a(44),x=a(9),S=a(251),_=a(115),I=a(30);a(227);var L=Object(m.b)((function(e){return{authed:e.authed}}))((function(e){var t=e.history.location.pathname;return"/login"===t||"/signup"===t||"/app"===t?l.a.createElement(l.a.Fragment,null):l.a.createElement(S.a,{className:"header transparent",expand:"lg"},l.a.createElement(I.LinkContainer,{to:e.authed?"/app":"/",style:{color:"white"}},l.a.createElement(S.a.Brand,{className:"mr-auto"},"Todoie")),l.a.createElement(I.LinkContainer,{to:"/login"},l.a.createElement(_.a,{variant:"light",className:"mr-2"},"Log in")),l.a.createElement(I.LinkContainer,{to:"/signup"},l.a.createElement(_.a,{variant:"outline-light",className:"mr-2"},"Sign up")))})),B=a(6),D=a(244),T=a(245),G=a(116),P=a(250),A=a(253),U=(a(228),a(68)),F=a.n(U);var M={authUser:O},q=Object(m.b)((function(e){return{authed:e.authed}}),M)((function(e){var t=Object(c.useState)(),a=Object(B.a)(t,2),n=a[0],r=a[1],o=Object(c.useState)(),i=Object(B.a)(o,2),s=i[0],u=i[1],m=Object(c.useState)(!1),p=Object(B.a)(m,2),f=p[0],h=p[1],g=Object(c.useState)(!1),b=Object(B.a)(g,2),E=b[0],v=b[1];return l.a.createElement("div",{className:"auth bg-light"},l.a.createElement(D.a,{fluid:!0},l.a.createElement(T.a,{className:"pt-5 justify-content-center align-items-center"},l.a.createElement(d.Link,{to:"/",className:"d-flex align-items-end logo-link"},l.a.createElement("img",{src:F.a,width:"30",height:"30"}),l.a.createElement("h3",{className:"d-inline-block m-0 text-dark"},"odoie"))),l.a.createElement(T.a,{className:"my-4 justify-content-center"},l.a.createElement(G.a,{className:"auth-form-container pt-3 pb-4 px-4 border rounded"},l.a.createElement(P.a,{noValidate:!0,validated:f,onSubmit:function(t){!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),h(!0),t.preventDefault();var a={username:n,password:s};y.a.post("/api/login",a).then((function(t){console.log(t),200===t.status&&(e.authUser(JSON.parse(t.config.data).username),console.log(e.authed),e.history.push("/app"))})).catch((function(e){console.error(e),v(!0),u(null)}))}},l.a.createElement("h3",{className:"text-center text-secondary"},"Log in"),l.a.createElement(P.a.Group,{controlId:"formBasicEmail"},l.a.createElement(P.a.Label,{className:"font-weight-bold"},"Email"),l.a.createElement(P.a.Control,{type:"email",placeholder:"Enter email",required:!0,onChange:function(e){return r(e.target.value)}}),l.a.createElement(P.a.Control.Feedback,{type:"invalid"},"Please provide a proper Email.")),l.a.createElement(P.a.Group,{controlId:"formBasicPassword",className:"mb-4"},l.a.createElement(P.a.Label,{className:"font-weight-bold"},"Password"),l.a.createElement(P.a.Control,{type:"password",placeholder:"Password",required:!0,onChange:function(e){return u(e.target.value)}}),l.a.createElement(P.a.Control.Feedback,{type:"invalid"},"Please provide a proper password.")),l.a.createElement(_.a,{variant:"info",type:"submit",block:!0},"Log in"),l.a.createElement("div",{className:"text-danger",style:{display:E?"block":"none"}},"Invalid username or password")),l.a.createElement(A.a.Divider,null),l.a.createElement("div",{className:"text-muted"},"Don't have an account yet? ",l.a.createElement(d.Link,{to:"/signup"},"Sign up"))))))}));var V={authUser:O},J=Object(m.b)(null,V)((function(e){var t=Object(c.useState)(),a=Object(B.a)(t,2),n=a[0],r=a[1],o=Object(c.useState)(),i=Object(B.a)(o,2),s=i[0],u=i[1],m=Object(c.useState)(!1),p=Object(B.a)(m,2),f=p[0],h=p[1];return l.a.createElement("div",{className:"auth bg-light"},l.a.createElement(D.a,{fluid:!0},l.a.createElement(T.a,{className:"pt-5 justify-content-center align-items-center"},l.a.createElement(d.Link,{to:"/",className:"d-flex align-items-end logo-link"},l.a.createElement("img",{src:F.a,width:"30",height:"30"}),l.a.createElement("h3",{className:"d-inline-block m-0 text-dark"},"odoie"))),l.a.createElement(T.a,{className:"my-4 justify-content-center"},l.a.createElement(G.a,{className:"auth-form-container pt-3 pb-4 px-4 border rounded"},l.a.createElement(P.a,{onSubmit:function(t){t.preventDefault();var a={username:n,password:s};y.a.post("/api/signup",a).then((function(t){console.log(t),200===t.status&&(e.authUser(a.username),e.history.push("/app"))})).catch((function(e){console.error(e),e.toString().includes("409")&&(h(!0),u(null))}))}},l.a.createElement("h3",{className:"text-center text-secondary"},"Sign up"),l.a.createElement(P.a.Group,{controlId:"formBasicEmail"},l.a.createElement(P.a.Label,{className:"font-weight-bold"},"Email"),l.a.createElement(P.a.Control,{type:"email",placeholder:"Enter email",required:!0,onChange:function(e){r(e.target.value)}}),l.a.createElement(P.a.Control.Feedback,{type:"invalid"},"Please provide a proper Email."),l.a.createElement(P.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),l.a.createElement(P.a.Group,{controlId:"formBasicPassword",className:"mb-4"},l.a.createElement(P.a.Label,{className:"font-weight-bold"},"Password"),l.a.createElement(P.a.Control,{type:"password",placeholder:"Password",required:!0,onChange:function(e){u(e.target.value)}}),l.a.createElement(P.a.Control.Feedback,{type:"invalid"},"Please provide a proper password.")),l.a.createElement(_.a,{variant:"info",type:"submit",block:!0},"Sign up"),l.a.createElement("div",{className:"text-danger",style:{display:f?"block":"none"}},"Email has been registered.")),l.a.createElement(A.a.Divider,null),l.a.createElement("div",{className:"text-muted"},"Already have an account? ",l.a.createElement(d.Link,{to:"/login"},"Log in"))))))}));a(231),a(232);function z(e){return l.a.createElement(D.a,{fluid:!0,className:"landing-page"},l.a.createElement("div",{className:"layer"}," "),l.a.createElement("div",{className:"content d-flex flex-column justify-content-center"},l.a.createElement(T.a,{className:"justify-content-center py-3 m-0"},l.a.createElement("h1",{className:"text-light"},"Todoie")),l.a.createElement(T.a,{className:"justify-content-center m-0"},l.a.createElement("h4",{className:"text-light"},"A simple todo list app.")),l.a.createElement(T.a,{className:"justify-content-center pt-3 m-0"},l.a.createElement(G.a,{xs:"auto"},l.a.createElement(I.LinkContainer,{to:"/signup"},l.a.createElement(_.a,{variant:"info",size:"lg"},"Sign up for free now!"))))))}var H=a(117),R=l.a.createContext(),W=function(e){var t=Object(c.useState)(),a=Object(B.a)(t,2),n=a[0],r=a[1];return l.a.createElement(R.Provider,{value:[n,r]},e.children)};var K=function(e){var t=Object(c.useState)(""),a=Object(B.a)(t,2),n=a[0],r=a[1],o=Object(c.useContext)(R),i=Object(B.a)(o,2),s=i[0];return i[1],l.a.createElement(P.a,{onSubmit:function(t){t.preventDefault();var a,o=n.trim();o&&(a=o,y.a.post("/api/insertTodo",{groupId:s,todoContent:a,createdTime:new Date}).then((function(){e.setCount((function(e){return e+1}))})),r(""),console.log("add to do: "+o))},className:"mb-3"},l.a.createElement(T.a,null,l.a.createElement(H.a,{type:"text",value:n,onChange:function(e){r(e.target.value)},style:{width:"300px"},className:"mr-2"}),l.a.createElement(_.a,{variant:"secondary",type:"submit"},"Add Todo")))};var Q=Object(m.b)((function(e){return{visibility:e.visibility}}))((function(e){var t=Object(c.useContext)(R),a=Object(B.a)(t,2),n=a[0];return a[1],l.a.createElement("div",{className:"todo-list"},l.a.createElement("ul",null,function(e,t,a){switch(t){case 0:return e.filter((function(e){return e.groupId===a}));case 1:return e.filter((function(e){return e.groupId===a&&!1===e.isCompleted}));case 2:return e.filter((function(e){return e.groupId===a&&!0===e.isCompleted}))}}(e.list,e.visibility,n).map((function(t){return l.a.createElement("li",{key:t._id,className:t.isCompleted?"todo-list_li--completed":"todo-list_li--incomplete",onClick:function(){var a;a=t._id,y.a.post("/api/updateTodo",{todoId:a,isToggled:!0}).then((function(t){e.setCount((function(e){return e+1}))}))}},t.todoContent)}))))})),X=a(64),Y=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).renderButton=n.renderButton.bind(Object(X.a)(n)),n}return Object(C.a)(a,[{key:"renderButton",value:function(e,t){var a=this;return l.a.createElement("button",{className:this.props.visibility===t?"status-toggle_button--selected":"",onClick:function(){return a.props.switchVisibility(t)}},e)}},{key:"render",value:function(){return l.a.createElement("div",{className:"status-toggle"},this.renderButton("All",0),this.renderButton("Todo",1),this.renderButton("Done",2))}}]),a}(c.Component);var Z=Object(m.b)((function(e){return{visibility:e.visibility}}),{switchVisibility:function(e){return{type:"switch_visibility",payload:e}}})(Y),$=a(252),ee=a(4),te=a.n(ee),ae=a(248),ne=a(246);function re(e){return l.a.createElement(ae.a,{show:e.isModalOpen,onHide:e.closeModal,centered:!0},l.a.createElement(ae.a.Header,{closeButton:!0},l.a.createElement(ae.a.Title,null,"New group")),l.a.createElement(ae.a.Body,null,l.a.createElement(ne.a,null,l.a.createElement(H.a,{placeholder:"New group name",onChange:e.onGroupNameInputChange}))),l.a.createElement(ae.a.Footer,null,l.a.createElement(_.a,{variant:"secondary",onClick:e.closeModal},"Close"),l.a.createElement(_.a,{variant:"primary",onClick:e.onAddNewGroup},"Add")))}a(233);function oe(e){var t,a,n=Object(c.useState)(!1),r=Object(B.a)(n,2),o=r[0],i=r[1],s=Object(c.useState)(""),u=Object(B.a)(s,2),m=u[0],d=u[1],p=Object(c.useContext)(R),f=Object(B.a)(p,2),h=f[0],g=f[1],b=Object(c.useState)(!1),E=Object(B.a)(b,2);E[0],E[1];function v(){i(!1)}return Object(c.useEffect)((function(){!h&&e.groups.length>0&&g(e.groups[0]._id)}),[h,e.groups]),l.a.createElement("div",{className:"group-selector mt-5"},l.a.createElement("h4",{className:"mb-3 ml-3"},"Groups"),l.a.createElement($.a,{className:"mb-2"},(t=e.groups,a=h,t.map((function(e){return l.a.createElement($.a.Item,{key:e._id,className:te()("item",{"item-selected":e._id===a,"text-primary":e._id===a}),onClick:function(){g(e._id)}},l.a.createElement("span",null,e.groupName))})))),l.a.createElement(T.a,{className:"justify-content-center"},l.a.createElement(_.a,{variant:"secondary",size:"sm",className:"mt-3",onClick:function(){i(!0)}},"Add group")),l.a.createElement(re,{isModalOpen:o,closeModal:v,onGroupNameInputChange:function(e){if(e.target.value){var t=e.target.value.trim();d(t)}},onAddNewGroup:function(t){t.preventDefault(),y.a.post("/api/addGroup",{groupName:m,timeCreated:new Date}).then((function(t){console.log(t),g(t.data._id),e.setCount((function(e){return e+1}))})),v(),d("")}}))}var ce=a(247),le=a(24),ie=a(119),se=a(120);var ue=Object(m.b)((function(e){return{authed:e.authed}}))((function(e){return l.a.createElement(S.a,{bg:"dark"},l.a.createElement(I.LinkContainer,{to:e.authed?"/app":"/",style:{color:"white"}},l.a.createElement(S.a.Brand,null,"Todoie")),l.a.createElement(_.a,{variant:"outline-secondary",onClick:function(){e.setIsSidebarOpen(!e.isSidebarOpen)}},l.a.createElement(ie.a,{icon:se.a})),l.a.createElement(ce.a,{className:"ml-auto",title:e.authed,variant:"secondary"},l.a.createElement(I.LinkContainer,{to:"/api/logout"},l.a.createElement(le.a.Item,null,"Log out"))))}));a(236);function me(e){return l.a.createElement("div",{bg:"dark",className:te()("sidebar",{"is-open":e.isSidebarOpen})},e.children)}function de(e){var t=Object(c.useState)(null),a=Object(B.a)(t,2),n=a[0],r=a[1],o=Object(c.useState)(0),i=Object(B.a)(o,2),s=i[0],u=i[1],m=Object(c.useState)(!0),d=Object(B.a)(m,2),p=d[0],f=d[1];return Object(c.useEffect)((function(){y.a.get("/api/getUserData").then((function(e){r(e.data)}))}),[s]),l.a.createElement(D.a,{fluid:!0,className:"p-0",style:{height:"100vh"}},l.a.createElement(ue,{isSidebarOpen:p,setIsSidebarOpen:f}),l.a.createElement(W,null,l.a.createElement("div",{className:"container-"},console.log(n?n.todos:[]),console.log(s),l.a.createElement(me,{isSidebarOpen:p},l.a.createElement(oe,{groups:n?n.groups:[],setCount:u})),l.a.createElement("div",{className:"middle-lane"},l.a.createElement(K,{setCount:u}),l.a.createElement(Z,null),l.a.createElement(Q,{list:n?n.todos:[],setCount:u})))))}a(237);var pe=a(123),fe=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){return Object(N.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"render",value:function(){var e=this.props,t=e.component,a=e.path,n=Object(pe.a)(e,["component","path"]);return l.a.createElement(x.d,Object.assign({path:a},n),this.props.authed?l.a.createElement(t,null):l.a.createElement(x.c,{to:"/login"}))}}]),a}(l.a.Component),he=Object(m.b)((function(e){return{authed:e.authed}}))(fe),ge=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(){return Object(N.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(x.d,{component:L}),l.a.createElement(x.d,{path:"/login",component:q}),l.a.createElement(x.d,{path:"/signup",component:J}),l.a.createElement(x.d,{path:"/",exact:!0,component:z}),l.a.createElement(he,{path:"/app",component:de}))}}]),a}(l.a.Component),be={fetchUser:j},Ee=Object(m.b)(null,be)(ge);function ve(){return(ve=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return ve.apply(this,arguments)})().then((function(){s.a.render(l.a.createElement(m.a,{store:Object(u.d)(E,Object(u.a)(p.a))},l.a.createElement(d.BrowserRouter,null,l.a.createElement(Ee,null))),document.getElementById("root"))}))},68:function(e,t,a){e.exports=a.p+"static/media/Todoie_logo.6a235456.svg"}},[[125,1,2]]]);
//# sourceMappingURL=main.42f158cb.chunk.js.map